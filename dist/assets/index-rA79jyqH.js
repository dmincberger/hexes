(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function t(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerPolicy&&(i.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?i.credentials="include":l.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(l){if(l.ep)return;l.ep=!0;const i=t(l);fetch(l.href,i)}})();class m{constructor(n,t,o,l,i){console.log(this),this.width=n,this.height=t,this.color=o,this.clippy_path=l,this.identyfikator=i,this.createDiv()}createDiv(){this.div=document.createElement("div"),this.div.style.width=`${this.width}px`,this.div.style.height=`${this.height}px`,this.div.style.backgroundColor=this.color,this.div.style.color="white",this.div.style.position="absolute",this.div.style.clipPath="clip-path: polygon(25% 5%, 75% 5%, 100% 50%, 75% 95%, 25% 95%, 0% 50%);",this.div.classList.add("hex_web"),this.div.style.textAlign="center",this.div.style.margin="2px",this.div.id=this.identyfikator}getRoot(){return this.div}setXY(n,t){this.div.style.left=`${n}px`,this.div.style.top=`${t}px`}setText(n){this.innerHTML=n}}const L="gray";let E="clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)",s=document.getElementById("size"),f=document.getElementById("plansza"),y=document.getElementById("game_items"),T=document.getElementById("load"),O=document.getElementById("save"),w=document.getElementById("json_file"),c=document.getElementById("json_text");console.log(w);let e={};c.innerHTML=JSON.stringify(e,null,5);let v="WALL";e.level=[];let a=[];O.addEventListener("click",function(){e.lastid=a[a.length-1];const d="/saveData",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e,null,5)};fetch(d,n).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{}).catch(t=>{console.error("Error during data save:",t)})});T.addEventListener("click",function(){const d="/loadData",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e,null,5)};fetch(d,n).then(t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(t=>{e=t,console.log("TO JEST LOADED DANE: ",toString(e)),c.innerHTML=JSON.stringify(e,null,5),a=[];for(let l=0;l<e.level.length;l++)a.push(e.level[l].id);s.value=e.size,f.replaceChildren();for(let l=0;l<s.value;l++){let i=l*100;for(let r=0;r<s.value;r++){let p=r*100+700,g=s.value*l+r;const h=new m(100,100,L,E,g);r%2==1&&h.setXY(p,i+60),r%2==0&&h.setXY(p,i);for(let u=0;u<e.level.length;u++)if(e.level[u].id==g){h.getRoot().innerHTML=`${e.level[u].dirout}^`,h.getRoot().style.transform=`rotate(${e.level[u].dirout*60}deg)`,h.getRoot().innerHTML=`${e.level[u].dirout}`;break}f.appendChild(h.getRoot())}}let o=document.querySelector("#plansza");for(let l=0;l<o.children.length;l++)o.children[l].addEventListener("click",function(){if(console.log(e),a.includes(this.id)){for(let i=0;i<e.level.length;i++)if(e.level[i].id==this.id){e.level[i].type=v,e.level[i].dirin=parseInt((e.level[i].dirin+1)%6),e.level[i].dirout=parseInt((e.level[i].dirout+1)%6),this.style.transform=`rotate(${e.level[i].dirout*60}deg)`,this.innerHTML=`${e.level[i].dirout}`,c.innerHTML=JSON.stringify(e,null,5);break}}else{a.push(this.id);let i={};i.id=this.id,i.dirout=0,i.dirin=3,i.x=this.id%s.value,i.z=Math.floor(this.id/s.value),i.type=v,e.level.push(i),this.style.transform=`rotate(${i.dirout*60}deg)`,this.innerHTML=`${i.dirout}`,c.innerHTML=JSON.stringify(e,null,5)}})}).catch(t=>{console.error("Error during data save:",t)})});O.value=e;for(let d=0;d<y.children.length;d++)y.children[d].addEventListener("click",function(){v=this.value});s.addEventListener("change",function(){e={},e.level=[],e.size=s.value,a=[],c.innerHTML=JSON.stringify(e,null,5),f.replaceChildren();for(let n=0;n<s.value;n++){let t=n*100;for(let o=0;o<s.value;o++){let l=o*100+700,i=s.value*n+o;const r=new m(100,100,L,E,i);o%2==1&&r.setXY(l,t+60),o%2==0&&r.setXY(l,t),console.log(o),f.appendChild(r.getRoot())}}let d=document.querySelector("#plansza");for(let n=0;n<d.children.length;n++)d.children[n].addEventListener("click",function(){if(console.log(e),a.includes(this.id)){for(let t=0;t<e.level.length;t++)if(e.level[t].id==this.id){e.level[t].type=v,e.level[t].dirin=parseInt((e.level[t].dirin+1)%6),e.level[t].dirout=parseInt((e.level[t].dirout+1)%6),this.style.transform=`rotate(${e.level[t].dirout*60}deg)`,this.innerHTML=`${e.level[t].dirout}`,c.innerHTML=JSON.stringify(e,null,5);break}}else{a.push(this.id);let t={};t.id=this.id,t.dirout=0,t.dirin=3,t.x=this.id%s.value,t.z=Math.floor(this.id/s.value),t.type=v,e.level.push(t),this.style.transform=`rotate(${t.dirout*60}deg)`,this.innerHTML=`${t.dirout}`,c.innerHTML=JSON.stringify(e,null,5)}})});
